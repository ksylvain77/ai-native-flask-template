#!/usr/bin/env python3
"""
{{PROJECT_NAME}}
{{PROJECT_DESCRIPTION}}

Entry point for the {{PROJECT_NAME}} application.
"""

from flask import Flask, jsonify
import os
import sys
from pathlib import Path

# Add modules directory to path
sys.path.insert(0, str(Path(__file__).parent / "modules"))

# Import your modules here
from core import get_status
from utils import get_timestamp

app = Flask(__name__)

@app.route('{{HEALTH_ENDPOINT}}')
def health():
    """Health check endpoint"""
    return jsonify({
        "status": "healthy",
        "service": "{{SERVICE_NAME}}",
        "timestamp": get_timestamp()
    })

@app.route('/')
def home():
    """Home endpoint"""
    status = get_status()
    return jsonify({
        "message": "Welcome to {{PROJECT_NAME}}",
        "description": "{{PROJECT_DESCRIPTION}}",
        "status": status,
        "endpoints": {
            "health": "{{HEALTH_ENDPOINT}}",
            "home": "/",
            "api_docs": "/api"
        }
    })

@app.route('/api')
def api_docs():
    """API documentation endpoint"""
    return jsonify({
        "name": "{{PROJECT_NAME}} API",
        "version": "{{PROJECT_VERSION}}",
        "description": "{{PROJECT_DESCRIPTION}}",
        "endpoints": [
            {"path": "/", "method": "GET", "description": "Home page"},
            {"path": "{{HEALTH_ENDPOINT}}", "method": "GET", "description": "Health check"},
            {"path": "/api", "method": "GET", "description": "API documentation"}
        ]
    })

if __name__ == '__main__':
    port = int(os.getenv('PORT', {{PORT}}))
    debug = os.getenv('DEBUG', 'False').lower() == 'true'
    
    print(f"üöÄ Starting {{PROJECT_NAME}} on port {port}")
    print(f"üåê Server: {{SERVER_URL}}")
    print(f"üîç Health check: {{SERVER_URL}}{{HEALTH_ENDPOINT}}")
    
    app.run(host='0.0.0.0', port=port, debug=debug)
